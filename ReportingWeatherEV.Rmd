---
title: "Main Weather Events Impacting The Health and Economy of the People and Community"
author: "Fernando Ruiz"
date: "2023-06-22"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```



# 1. Objetive

The objective of this paper is describe,first, which types of weather events are most harmful with respect to population health and second, which types of these events have the greatest economic consequences.  

# 2.Data Policy

The data used in this study it's`provided by United States National Oceanic and Atmospheric Administration. This institution configure a data base with the data of different storms and other strong nature events occured across the United States  since 1950 to 2011, in this data is included the every type of every atmospheric event (48 defined) and settled the consecunces not only in the affectation on people health and integrity but also in the economic matters.

## 2.1 download and reading the data

The data it`s  loaded to an R enviroment directly from the Coursera Data Reproducible Course website. The file is compressed by a "bzip2" algorithm.  
the scriopts to read and processing the data are located in the following GitHub repository:
"https://github.com/FERNANDO10R/PEER_GRADE_A_REPDAT_PROJ2.git"

## 2.2 File Desciption

The file(data frame) has 902,297 observations and 37 variables settled.One grouppf these variables identifies the names of the states and counties where the catastrophic events  ocurred including their respective code names,longitude and latitude, dates and times  of the beginning and the ending of the events. Also describes the county where the event begun and the county wher it finished. 

Another variable group consider the type of the event (specifically the name of that variable is :"EVTYPE");and another type of event characteristics description. 

The final group corresponding to the consequences of the catastrophically events in matters such: Injuries, fatalities and economic looses,these last are divided into two levels: damage to a property and damage to a crops. The specific varaiables names in the data frame are: "FATALITIES","INJURIES","PROPDMG" and "CROPDMG". Especially in the groupof economic consecuences ther are two variables to consider: "PROPDMGEXP" and "CROPDMGEXP", these varables express the the monetary units of the ecomonic values (B, corrresponds a billions of dollar, k for thosands and M for millions).  

# 3. Data Processing.

The data is downloaded using R functions (version 4,3,0) as shown below: 

```{r load_read, message=FALSE,warning=FALSE}
download.file("https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2","StormData.csv.bz2")
df <- read.csv("StormData.csv.bz2")

library(dplyr)
library(lubridate)

df$BGN_DATE <- as.Date(df$BGN_DATE)

df <- mutate(df, PROPDMGMUS = ifelse(df$PROPDMGEXP == "K", df$PROPDMG / 1000, ifelse(df$PROPDMGEXP == "B", df$PROPDMG * 1000, df$PROPDMG)))

df <- mutate(df, CROPDMGMUS = ifelse(df$CROPDMGEXP == "K", df$CROPDMG / 1000, ifelse(df$CROPDMGEXP == "B", df$CROPDMG * 1000, df$CROPDMG)))
```

The data frame (df) is modified adding two columns to settled the economic damages (property and crop) in million of dollars.These columns are: "PROPDMGMUS" and "CROPDMGMUS".


# 3.1 Reviewing the NA values.

The policy to manage the NA values for the interest variables ("EVTYPE","FATALITIES","INJURIES","PROPDMG",and "CROPDMG") is consider valid a  maximum of  5% of them in each one, if that values exist,and if the quantity of NA values is higher than 5% replace them by an average of the values for the corresponding variable.

```{r missing_val }
 t <-sum(is.na(c("EVTYPE","FATALITIES","INJURIES","PROPDMG","CROPDMG")))
sna <-t/5

if(sna==0){cat("There are not missing values in the variables observations")}else{if(sna>0.05*902297){cat("The Na values policy has to be applicated")}else{cat("No further actions are required to fix na values")}}

```
# Data Processing

## (describes how the data were load into R and prosseced for tha analsys)



#3.2  Data Analysis Summary

```{r summa_ry }

sm_df <- subset[,c("df$EVTYPE","df$FATALITIES","df$INJURIES",df$PROPDMGMUS,df$CROPDMGMUS)]

```

# Synopsis Data Analysis Summary

#Results \## note:at least one plot and at least 3 figure

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
